"use strict";(self.webpackChunkdash_core_components=self.webpackChunkdash_core_components||[]).push([[746],{19979:function(e,t,r){r.r(t),r.d(t,{default:function(){return F}});var n,o=r(48136),i=r(51609),a=r.n(i),u=r(91487),s=r(51647),c=r(71298),l=r(1322),f=r(18851),p=r(92234),d=r(75647),v=r(84165),h=r(76120),y=r.n(h),g=r(24203),m=r(4459),b=function(e){var t=e.onResize,r=e.children,o=e.targets,u=(0,i.createRef)(),s=(0,i.useCallback)((function(){n&&clearTimeout(n),n=setTimeout((function(){t(!0)}),50)}),[t]),c=(0,i.useMemo)((function(){return new ResizeObserver(s)}),[t]);return(0,i.useEffect)((function(){return u.current?(o.forEach((function(e){return c.observe(e.current)})),c.observe(u.current),function(){c.disconnect()}):function(){}}),[u.current]),a().createElement("div",{ref:u},r)};b.propTypes={onResize:y().func,children:y().node,targets:y().any};var _=b;function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return(t=k(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function k(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}var N={autosize:!0,height:void 0,width:void 0},C={},T={autosize:!1},S={responsive:!0},x={},L={responsive:!1},z=function(e,t,r){var n;if((0,u.A)(r,["click","hover","selected"])){var o=[];if((0,s.A)(t))return null;for(var i=e.data,a=function(){var e=t.points[p],r=(0,c.A)((function(e){return!(0,u.A)((0,l.A)(e),["Object","Array"])}),e);(0,f.A)("bbox",e)&&(r.bbox=e.bbox),(0,f.A)("curveNumber",e)&&(0,f.A)("customdata",i[r.curveNumber])&&((0,f.A)("pointNumber",e)?"number"==typeof e.pointNumber?r.customdata=i[r.curveNumber].customdata[e.pointNumber]:!e.pointNumber&&e.data.mode.includes("lines")&&(r.customdata=i[r.curveNumber].customdata):(0,f.A)("pointNumbers",e)&&(r.customdata=e.pointNumbers.map((function(e){return i[r.curveNumber].customdata[e]})))),(0,f.A)("pointNumbers",e)&&(r.pointNumbers=e.pointNumbers),o[p]=r},p=0;p<t.points.length;p++)a();n={points:o}}else"relayout"!==r&&"restyle"!==r||(n=t);return(0,f.A)("range",t)&&(n.range=t.range),(0,f.A)("lassoPoints",t)&&(n.lassoPoints=t.lassoPoints),n},q=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=E(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,D()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}(this,t,[e])).gd=a().createRef(),r._hasPlotted=!1,r._prevGd=null,r._queue=Promise.resolve(),r.parentElement=a().createRef(),r.bindEvents=r.bindEvents.bind(r),r.getConfig=r.getConfig.bind(r),r.getConfigOverride=r.getConfigOverride.bind(r),r.getLayout=r.getLayout.bind(r),r.getLayoutOverride=r.getLayoutOverride.bind(r),r.graphResize=r.graphResize.bind(r),r.isResponsive=r.isResponsive.bind(r),r.amendTraces=r.amendTraces.bind(r),r.state={override:{},originals:{}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e),r=t,n=[{key:"plot",value:function(e){var t,r,n,i=this,a=e.figure,u=e.config,s=e.animate,c=e.animation_options,l=e.responsive,f=e.mathjax,p=this.gd.current;a=e._dashprivate_transformFigure(a,p),u=e._dashprivate_transformConfig(u,p);var d=this.getConfig(u,l);d.typesetMath=f;var v={data:null===(t=a)||void 0===t?void 0:t.data,layout:this.getLayout(null===(r=a)||void 0===r?void 0:r.layout,l),frames:null===(n=a)||void 0===n?void 0:n.frames,config:d};return s&&this._hasPlotted&&a.data.length===p.data.length?a.frames?Plotly.deleteFrames(p).then((function(){return Plotly.addFrames(p,a.frames)})).then((function(){return Plotly.animate(p,v,c)})):Plotly.animate(p,v,c):(p.classList.add("dash-graph--pending"),(0,o.A)(f).then((function(){var e=i.gd.current;return e&&Plotly.react(e,v)})).then((function(){var e=i.gd.current;e&&(e.classList.remove("dash-graph--pending"),i._hasPlotted&&e!==i._prevGd&&(i._prevGd&&i._prevGd.removeAllListeners&&(i._prevGd.removeAllListeners(),Plotly.purge(i._prevGd)),i._hasPlotted=!1),i._hasPlotted||(i.bindEvents(),i.graphResize(!0),i._hasPlotted=!0,i._prevGd=e))})))}},{key:"amendTraces",value:function(e,t,r){var n=t.prependData,o=t.extendData,i=r.prependData,a=r.extendData,u=this;function s(e,t,r){var n=e.clearState,o=e[t],i=Promise.resolve();return o.forEach((function(e){var t,n,o;if(Array.isArray(e)&&"object"==typeof e[0]){var a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,3);t=a[0],n=a[1],o=a[2]}else t=e;n||(n=function(e){return Array.from(Array(function(e){return e[Object.keys(e)[0]]}(e).length).keys())}(t)),i=i.then((function(){var e=u.gd.current;return e&&Plotly[r](e,t,n,o)}))})),i.then((function(){return n(t)}))}var c=!1;return null!=i&&i.length&&n!==i&&(c=!0,e=e.then((function(){return s(r,"prependData","prependTraces")}))),null!=a&&a.length&&o!==a&&(c=!0,e=e.then((function(){return s(r,"extendData","extendTraces")}))),c&&(e=e.then((function(){return r._dashprivate_onFigureModified(r.figure)}))),e}},{key:"getConfig",value:function(e,t){return(0,p.A)(e,this.getConfigOverride(t))}},{key:"getLayout",value:function(e,t){if(!e)return e;var r=this.getLayoutOverride(t),n=this.state,o=n.override,i=n.originals,a={};for(var u in r)e[u]!==o[u]?a[u]=e[u]:i.hasOwnProperty(u)&&(a[u]=i[u]);for(var s in this.setState({override:r,originals:a}),i)e[s]===o[s]&&(e[s]=i[s]);for(var c in r)e[c]=r[c];return e}},{key:"getConfigOverride",value:function(e){switch(e){case!1:return L;case!0:return S;default:return x}}},{key:"getLayoutOverride",value:function(e){switch(e){case!1:return T;case!0:return N;default:return C}}},{key:"isResponsive",value:function(e){var t=e.config,r=e.figure,n=e.responsive;return"Boolean"===(0,l.A)(n)?n:Boolean(t.responsive&&(!r.layout||(r.layout.autosize||(0,s.A)(r.layout.autosize))&&((0,s.A)(r.layout.height)||(0,s.A)(r.layout.width))))}},{key:"graphResize",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.isResponsive(this.props)){var e=this.gd.current;e&&(e.classList.add("dash-graph--pending"),Plotly.Plots.resize(e).catch((function(){})).finally((function(){return e.classList.remove("dash-graph--pending")})))}}},{key:"bindEvents",value:function(){var e=this.props,t=e.setProps,r=e.clear_on_unhover,n=e.relayoutData,o=e.restyleData,i=e.hoverData,a=e.selectedData,u=this.gd.current;u.on("plotly_click",(function(e){var r=z(u,e,"click");(0,s.A)(r)||t({clickData:r})})),u.on("plotly_clickannotation",(function(e){var r=(0,d.A)(["event","fullAnnotation"],e);t({clickAnnotationData:r})})),u.on("plotly_hover",(function(e){var r=z(u,e,"hover");(0,s.A)(r)||(0,v.A)(r,i)||t({hoverData:r})})),u.on("plotly_selected",(function(e){var r=z(u,e,"selected");(0,s.A)(r)||(0,v.A)(r,a)||t({selectedData:r})})),u.on("plotly_deselect",(function(){t({selectedData:null})})),u.on("plotly_relayout",(function(e){var r=z(u,e,"relayout");(0,s.A)(r)||(0,v.A)(r,n)||t({relayoutData:r})})),u.on("plotly_restyle",(function(e){var r=z(u,e,"restyle");(0,s.A)(r)||(0,v.A)(r,o)||t({restyleData:r})})),u.on("plotly_unhover",(function(){r&&t({hoverData:null})}))}},{key:"componentDidMount",value:function(){var e=this.plot(this.props);this._queue=this.amendTraces(e,{},this.props)}},{key:"componentWillUnmount",value:function(){var e=this.gd.current;e&&e.removeAllListeners&&(e.removeAllListeners(),this._hasPlotted&&Plotly.purge(e))}},{key:"shouldComponentUpdate",value:function(e){return this.props.id!==e.id||JSON.stringify(this.props.style)!==JSON.stringify(e.style)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.props.id===e.id){var r=this._queue;this.props.mathjax===e.mathjax&&this.props.figure===e.figure&&this.props._dashprivate_transformConfig===e._dashprivate_transformConfig&&this.props._dashprivate_transformFigure===e._dashprivate_transformFigure||(r=r.then((function(){return t.plot(e)}))),this._queue=this.amendTraces(r,this.props,e)}}},{key:"componentDidUpdate",value:function(e){var t=this;e.id===this.props.id&&e.mathjax===this.props.mathjax||(this._queue=this._queue.then((function(){return t.plot(t.props)})))}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.id,n=e.style;return a().createElement(m.A,{id:r,key:r,className:t,style:n,ref:this.parentElement},a().createElement(_,{onResize:this.graphResize,targets:[this.parentElement,this.gd]}),a().createElement("div",{ref:this.gd,style:{height:"100%",width:"100%"}}))}}],n&&w(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i.Component);q.propTypes=A(A({},g.VZ),{},{prependData:y().arrayOf(y().oneOfType([y().array,y().object])),extendData:y().arrayOf(y().oneOfType([y().array,y().object])),clearState:y().func.isRequired}),q.defaultProps=A(A({},g.Sb),{},{prependData:[],extendData:[]});var F=q}}]);
//# sourceMappingURL=async-graph.js.map